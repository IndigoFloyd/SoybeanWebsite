<!DOCTYPE html>
<!-- This site was created in Webflow. https://www.webflow.com --><!-- Last Published: Tue May 30 2023 14:30:15 GMT+0000 (Coordinated Universal Time) -->
<html data-wf-domain="indigofloyds-soybean-webs-36836248ee4d2.webflow.io" data-wf-page="6475cf3c0daa31d35dd86c02"
    data-wf-site="6475cf3c0daa31d35dd86c04" data-wf-status="1">

<head>
    <meta charset="utf-8" />
    <title>Contact</title>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="Webflow" name="generator" />
    <link
        href="https://uploads-ssl.webflow.com/6475cf3c0daa31d35dd86c04/css/indigofloyds-soybean-webs-36836248ee4d2.webflow.9f585e230.css"
        rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous" />
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script
        type="text/javascript">WebFont.load({ google: { families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic", "Roboto:300,regular,500"] } });</script>
    <script
        type="text/javascript">!function (o, c) { var n = c.documentElement, t = " w-mod-"; n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch") }(window, document);</script>
    <link href="https://uploads-ssl.webflow.com/img/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="https://uploads-ssl.webflow.com/img/webclip.png" rel="apple-touch-icon" />
    <link href="../static/fileinput.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../static/bootstrap.min.css">
    <script src="//cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>
    <script src="../static/fileinput.min.js" type="text/javascript"></script>
    <style>
        .button-container{
            display: flex;
            justify-content: space-evenly; 
        }
        .form-check-input:checked {
        background-color: #face6a;
        border-color: #face6a; 
        }
    </style>
    <style>
        .w-container{
            
        }
    </style>
</head>

<body>
    <div data-collapse="medium" data-animation="default" data-duration="400" data-easing="ease" data-easing2="ease"
        role="banner" class="navigation-bar w-nav">
        <div class="w-container"><a href="/" class="brand-link w-nav-brand">
                <h1 class="brand-text">soyDNGP</h1>
            </a>
            <nav role="navigation" class="navigation-menu w-nav-menu"><a href="/"
                    class="navigation-link w-nav-link">Home</a><a href="/contact" aria-current="page"
                    class="navigation-link w-nav-link w--current">Contact</a></nav>
            <div class="hamburger-button w-nav-button">
                <div class="w-icon-nav-menu"></div>
            </div>
        </div>
    </div>
    <div class="section wf-section">
        <div class="container">
            <div class="section-title-group">
                <h2 class="section-heading centered">Upload file and predict</h2>

                <form action="/Predict" method="POST">
                    <div class="container my-5">
                    <div class="file-loading">
                        <input id="file" name='file' type="file" multiple class="file" accept=".vcf" data-preview-file-type="text"> 
                    </div>


                    <script>
                        $("#file").fileinput({
                            minFileCount:1,
                            maxFileCount:1,
                            uploadUrl: "/upload",
                            showPreview:false,
                            allowedFileExtensions: ["vcf"],
                            browseOnZoneClick:true,
                            uploadClass: "btn button btn-outline-warning text-white",
                            removeClass: "btn button btn-outline-warning text-white",
                            cancelClass: "btn button btn-outline-warning text-white",
                            browseClass: "btn button btn-outline-warning text-white"
                        });    
                    </script>

                    <div class="table-responsive mb-3">
                        <table class="table table-checkable">
                            <tr>
                                <tr>
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            id="checkall" value="all" data-bs-toggle="checkbox"> ALL</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="1" data-bs-toggle="checkbox"> MG</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="2" data-bs-toggle="checkbox"> ST</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="3" data-bs-toggle="checkbox"> FC</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="4" data-bs-toggle="checkbox"> P_CLR</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="5" data-bs-toggle="checkbox"> P_FRM</td>
    
                                </tr>
                                <tr>
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="6" data-bs-toggle="checkbox"> P_DENS</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="7" data-bs-toggle="checkbox"> POD</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="8" data-bs-toggle="checkbox"> SC_L</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="9" data-bs-toggle="checkbox"> SC_CLR</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="10" data-bs-toggle="checkbox"> H_CLR</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="11" data-bs-toggle="checkbox"> protein</td>
                                </tr>
                                <tr>
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="12" data-bs-toggle="checkbox"> oil</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="13" data-bs-toggle="checkbox"> Linoleic</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="14" data-bs-toggle="checkbox"> Linolenic</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="15" data-bs-toggle="checkbox"> eno</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="16" data-bs-toggle="checkbox"> R1</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="17" data-bs-toggle="checkbox"> R8</td>
                                </tr>
                                <tr>
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="18" data-bs-toggle="checkbox"> Hgt</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="19" data-bs-toggle="checkbox"> Mat</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="20" data-bs-toggle="checkbox"> Ldg</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="21" data-bs-toggle="checkbox"> SQ</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="22" data-bs-toggle="checkbox"> SdWgt</td>
    
                                    <td class="text-white"><input class="form-check-input" type="checkbox" name="options"
                                            value="23" data-bs-toggle="checkbox"> Yield</td>
                            </tr>
                        </table>

                        <a id="predict" href="/Predict"><button class="button mb-3">Predict</button></a>
                        <div class="progress" id="predictProgress" style="display:none">
                            <div id="progress-bar" class="progress-bar progress-bar-striped bg-success progress-bar-success" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    {% if not df.empty %}
    <section style="padding: 80px 10px; border-bottom: 2px solid #000000;">
        <div class="w-container">
            <div class="section-title-group">
                <h2 class="section-heading centered text-secondary">Predict results</h2>
                <table class="table table-striped table-hover">
                <thead>
                    <tr>
                    {% for col in col_names %}
                        <th><h5 class="text">{{ col }}</h5></th>
                    {% endfor %}
                    </tr>
                </thead>
                    <tbody>
                        {% for row in df.iterrows() %}
                        <tr>
                        {% for col in row[1] %}
                            <td><h5 class="text">{{ col }}</h5></td>
                        {% endfor %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="button-container">
                {% if page > 1 %}
                <a href="/pageprev"><button class="button">Prev</button></a>
                {% endif %}
                {% if page < total_pages %}
                <a href="/pagenext"><button class="button">Next</button></a>
                {% endif %}
            <a href="/download"><button class="button">Download</button></a>
        </div>
        </div>
        
            
    </section>
    {% endif %}
                

                    <script src="//cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

                    <script>
                        $(function () {
                            // 全选
                            $('#checkall').click(function () {
                                $('input[name=options]').prop('checked', this.checked);
                            });
                        });
                    </script>


                    <script>
                    var title = document.querySelector('#title');
                    var progressBar = document.querySelector('#progress-bar');
                    var progressInterval;

                    $(function() {
                        $('#predict').click(function() {
                        document.querySelector('#predictProgress').style.display = "block";
                        progressInterval = setInterval(function() {
                            fetch('/progress')
                            .then(res => res.json())
                            .then(data => {
                                updateProgress(data);
                                if (data.predict_finish) {
                                clearInterval(progressInterval);
                                }
                            });
                        }, 500);
                        });
                    });

                    function updateProgress(data) {
                        progressBar.style.width = data.progress;  // 更新进度条的宽度
                        progressBar.innerHTML = data.title;
                        if (data.predict_finish) {
                        // Prediction is complete, stop updating
                        clearInterval(progressInterval);
                        }
                    }
                    </script>

                    <script>
                    $('#download').on('click', function(e) {
                    e.preventDefault()  // 阻止默认行为

                    fetch('/download')  // 发起 GET 请求
                        .then(res => {
                        if (res.ok) {  // 如果请求成功
                            return res.blob()  // 返回 Blob 数据
                        }
                        })
                        .then(blob => {
                        const url = window.URL.createObjectURL(blob)  // 创建 Blob URL
                        const a = document.createElement('a')
                        a.href = url
                        a.download = 'predict.csv'  // 文件名
                        a.click()  // 模拟点击触发文件下载

                        // 释放内存
                        setTimeout(() => {
                            window.URL.revokeObjectURL(url)
                        }, 100)
                        })
                    })
                </script>



    
    <div class="footer wf-section">
        <div class="w-container">
            <div class="w-row">
                <div class="spc w-col w-col-4">
                    <h5>about Soydngp</h5>
                    <p class="paragraph-2">SoyDNGP, an advanced webserver designed to utilize the power of convolutional
                        neural network-based models for the prediction of agronomic traits in soybean. Built to serve
                        the burgeoning field of agriculture, our server supports the analysis of a comprehensive range
                        of traits.</p>
                </div>
                <div class="spc w-col w-col-4">
                    <h5>useful links</h5><a href="https://www.soybase.org/snps/" class="footer-link">the SoyBase SNP
                        page</a><a href="https://npgsweb.ars-grin.gov/gringlobal/descriptors"
                        class="footer-link">GRIN-Global website</a>
                </div>
                <div class="w-col w-col-4">
                    <h5>social</h5>
                    <div class="footer-link-wrapper w-clearfix"><img
                            src="https://uploads-ssl.webflow.com/6475cf3c0daa31d35dd86c04/6475cf3c0daa31d35dd86c48_social-18.svg"
                            width="20" alt="" class="info-icon" /><a href="#" class="footer-link with-icon">Twitter</a>
                    </div>
                    <div class="footer-link-wrapper w-clearfix"><img
                            src="https://uploads-ssl.webflow.com/6475cf3c0daa31d35dd86c04/6475cf3c0daa31d35dd86c1b_social-03.svg"
                            width="20" alt="" class="info-icon" /><a href="#" class="footer-link with-icon">Facebook</a>
                    </div>
                    <div class="footer-link-wrapper w-clearfix"><img
                            src="https://uploads-ssl.webflow.com/6475cf3c0daa31d35dd86c04/6475cf3c0daa31d35dd86c36_social-33.svg"
                            width="20" alt="" class="info-icon" /><a
                            href="https://github.com/IndigoFloyd/SoybeanWebsite"
                            class="footer-link with-icon">GitHub</a></div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer center wf-section">
        <div class="w-container">
            <div class="footer-text">CopyRight © 2020 ~ 2021 National Key Laboratory of Crop Genetic Improvement,
                Huazhong Agricultural University</div>
        </div><img
            src="https://uploads-ssl.webflow.com/6475cf3c0daa31d35dd86c04/6475cf3c0daa31d35dd86c5c_-nre42yj30rlfcjd7-001.png"
            loading="lazy" width="100" height="100"
            srcset="https://uploads-ssl.webflow.com/6475cf3c0daa31d35dd86c04/6475cf3c0daa31d35dd86c5c_-nre42yj30rlfcjd7-001-p-500.png 500w, https://uploads-ssl.webflow.com/6475cf3c0daa31d35dd86c04/6475cf3c0daa31d35dd86c5c_-nre42yj30rlfcjd7-001.png 770w"
            sizes="100px" alt="" />
    </div>
    <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6475cf3c0daa31d35dd86c04"
        type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>
    <script src="https://uploads-ssl.webflow.com/6475cf3c0daa31d35dd86c04/js/webflow.321689bca.js"
        type="text/javascript"></script>
    <script src="../static/bootstrap.bundle.min.js"></script>
</body>
</html>